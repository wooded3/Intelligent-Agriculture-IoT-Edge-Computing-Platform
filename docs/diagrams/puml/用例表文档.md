# 用例表详细文档

本文档包含智慧教室物联网系统的所有用例的详细描述。

## 1. 设备管理模块用例表

### 表1-1 设备注册用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 设备注册 |
| 用例编号 | UC-001 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统，教室已存在 |
| 后置条件 | 设备已注册到系统中，设备状态为在线或离线 |
| 基本事件流 | 1. 管理员进入设备管理页面<br>2. 点击"添加设备"按钮<br>3. 填写设备信息（名称、类型、教室ID、配置参数）<br>4. 系统验证设备信息（名称非空、类型有效、教室ID存在）<br>5. 系统生成设备ID（格式：device_时间戳）<br>6. 系统保存设备信息到数据库<br>7. 系统设置设备初始状态为OFFLINE<br>8. 显示注册成功提示 |
| 异常事件流 | 3a. 设备信息验证失败：系统提示错误信息（如"设备名称不能为空"），返回步骤3<br>4a. 教室ID不存在：系统提示"教室不存在"，返回步骤3<br>6a. 数据库保存失败：系统提示"保存失败，请重试" |
| 优先级 | 高 |
| 扩展点 | 无 |

### 表1-2 设备查询用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 设备查询 |
| 用例编号 | UC-002 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统 |
| 后置条件 | 显示符合条件的设备列表 |
| 基本事件流 | 1. 管理员进入设备管理页面<br>2. 输入查询条件（教室ID、设备类型等，可选）<br>3. 点击"查询"按钮<br>4. 系统根据条件查询数据库<br>5. 系统执行分页查询<br>6. 系统返回设备列表（包含总数和分页数据）<br>7. 显示设备列表 |
| 异常事件流 | 4a. 查询失败：系统显示错误提示 |
| 优先级 | 高 |
| 扩展点 | 包含"设备详情查询"用例、"设备统计"用例 |

### 表1-3 设备编辑用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 设备编辑 |
| 用例编号 | UC-003 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统，设备已存在 |
| 后置条件 | 设备信息已更新 |
| 基本事件流 | 1. 管理员在设备列表中点击"编辑"按钮<br>2. 系统加载设备当前信息<br>3. 管理员修改设备信息（名称、配置参数等）<br>4. 系统验证修改后的信息<br>5. 系统更新数据库中的设备信息<br>6. 显示更新成功提示 |
| 异常事件流 | 4a. 信息验证失败：系统提示错误信息，返回步骤3<br>5a. 更新失败：系统提示"更新失败，请重试" |
| 优先级 | 高 |
| 扩展点 | 无 |

### 表1-4 设备删除用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 设备删除 |
| 用例编号 | UC-004 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统，设备已存在 |
| 后置条件 | 设备已从系统中删除，相关数据已级联删除 |
| 基本事件流 | 1. 管理员在设备列表中点击"删除"按钮<br>2. 系统弹出确认对话框<br>3. 管理员确认删除<br>4. 系统检查设备是否有关联数据<br>5. 系统删除设备及相关数据（级联删除）<br>6. 显示删除成功提示<br>7. 刷新设备列表 |
| 异常事件流 | 3a. 管理员取消删除：关闭对话框，不执行删除操作<br>5a. 删除失败：系统提示"删除失败，请重试" |
| 优先级 | 中 |
| 扩展点 | 无 |

### 表1-5 设备状态更新用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 设备状态更新 |
| 用例编号 | UC-005 |
| 参与者 | 系统、学校管理员 |
| 前置条件 | 设备已注册 |
| 后置条件 | 设备状态已更新 |
| 基本事件流 | 1. 系统检测设备心跳或管理员手动更新状态<br>2. 系统验证状态值（ONLINE/OFFLINE/ERROR）<br>3. 系统更新数据库中的设备状态<br>4. 系统更新设备更新时间戳 |
| 异常事件流 | 2a. 状态值无效：系统忽略该更新请求 |
| 优先级 | 中 |
| 扩展点 | 无 |

---

## 2. 数据管理模块用例表

### 表2-1 数据采集用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 数据采集 |
| 用例编号 | UC-006 |
| 参与者 | 系统 |
| 前置条件 | 设备已注册且在线 |
| 后置条件 | 传感器数据已保存到数据库 |
| 基本事件流 | 1. 传感器设备按配置的采样间隔采集数据<br>2. 设备通过HTTP POST接口上报数据到系统（/api/data/metrics）<br>3. 系统接收数据（设备ID、数值、单位、时间戳）<br>4. 系统验证数据格式（设备ID存在、数值有效、时间戳有效）<br>5. 系统生成数据记录ID<br>6. 系统保存数据到数据库（sensor_data表）<br>7. 系统触发告警检测（调用AlertService.checkAndGenerateAlert）<br>8. 系统返回成功响应 |
| 异常事件流 | 4a. 数据格式错误：系统返回400错误响应，不保存数据<br>4b. 设备ID不存在：系统返回404错误响应<br>6a. 数据库保存失败：系统返回500错误响应 |
| 优先级 | 高 |
| 扩展点 | 触发"告警触发与检测"用例、"自动化控制执行"用例 |

### 表2-2 数据查询用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 数据查询 |
| 用例编号 | UC-007 |
| 参与者 | 教师、学生、学校管理员 |
| 前置条件 | 用户已登录系统 |
| 后置条件 | 显示数据列表 |
| 基本事件流 | 1. 用户进入数据监控页面<br>2. 选择查询条件（设备ID、时间范围、分页参数）<br>3. 点击"查询"按钮<br>4. 系统验证查询参数<br>5. 系统查询数据库（sensor_data表）<br>6. 系统执行分页查询<br>7. 系统返回数据列表（包含总数和分页数据）<br>8. 显示数据列表 |
| 异常事件流 | 4a. 参数验证失败：系统提示错误信息<br>5a. 查询失败：系统显示错误提示 |
| 优先级 | 高 |
| 扩展点 | 包含"数据可视化"用例、"实时数据展示"用例 |

### 表2-3 数据可视化用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 数据可视化 |
| 用例编号 | UC-008 |
| 参与者 | 教师、学生、学校管理员 |
| 前置条件 | 数据查询已完成 |
| 后置条件 | 显示数据图表 |
| 基本事件流 | 1. 系统获取查询到的数据列表<br>2. 系统使用ECharts生成图表数据<br>3. 系统渲染折线图（时间趋势）或柱状图（数据对比）<br>4. 显示数据图表 |
| 异常事件流 | 2a. 数据为空：系统显示"暂无数据"提示，不显示图表 |
| 优先级 | 高 |
| 扩展点 | 无 |

---

## 3. 告警管理模块用例表

### 表3-1 创建告警规则用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 创建告警规则 |
| 用例编号 | UC-009 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统，设备已存在 |
| 后置条件 | 告警规则已保存到数据库 |
| 基本事件流 | 1. 管理员进入告警中心页面<br>2. 点击"创建告警规则"按钮<br>3. 填写规则信息（名称、条件类型、阈值、关联设备ID列表）<br>4. 系统验证规则信息（名称非空、条件类型有效、阈值有效、设备ID存在）<br>5. 系统生成规则ID<br>6. 系统保存规则到数据库（alert_rules表）<br>7. 规则默认状态为启用（enabled=true）<br>8. 显示创建成功提示 |
| 异常事件流 | 4a. 规则信息验证失败：系统提示错误信息（如"阈值必须大于0"），返回步骤3<br>4b. 设备ID不存在：系统提示"设备不存在"，返回步骤3<br>6a. 保存失败：系统提示"保存失败，请重试" |
| 优先级 | 高 |
| 扩展点 | 扩展"告警规则编辑"用例 |

### 表3-2 查询告警规则列表用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 查询告警规则列表 |
| 用例编号 | UC-010 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统 |
| 后置条件 | 显示告警规则列表 |
| 基本事件流 | 1. 管理员进入告警中心页面<br>2. 系统自动查询所有告警规则<br>3. 系统返回规则列表<br>4. 显示规则列表（包含规则名称、条件、阈值、状态、创建时间） |
| 异常事件流 | 2a. 查询失败：系统显示错误提示 |
| 优先级 | 高 |
| 扩展点 | 无 |

### 表3-3 告警触发与检测用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 告警触发与检测 |
| 用例编号 | UC-011 |
| 参与者 | 系统 |
| 前置条件 | 告警规则已配置且启用，设备数据已采集 |
| 后置条件 | 活跃告警已生成并显示在界面上 |
| 基本事件流 | 1. 系统接收新的传感器数据<br>2. 系统调用AlertService.checkAndGenerateAlert方法<br>3. 系统查询所有启用的告警规则<br>4. 系统遍历规则，检查数据是否匹配规则条件<br>5. 如果数据超出阈值（根据条件类型：大于/小于/等于），系统生成活跃告警<br>6. 系统保存告警到数据库（active_alerts表）<br>7. 系统在告警中心显示新告警 |
| 异常事件流 | 5a. 数据不满足条件：系统继续监控，不生成告警<br>6a. 保存失败：系统记录错误日志，不生成告警 |
| 优先级 | 高 |
| 扩展点 | 包含"查询活跃告警"用例 |

### 表3-4 处理告警用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 处理告警 |
| 用例编号 | UC-012 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统，存在活跃告警 |
| 后置条件 | 告警状态已更新为已解决 |
| 基本事件流 | 1. 管理员在告警中心查看活跃告警列表<br>2. 管理员点击"处理"按钮<br>3. 系统更新告警状态为RESOLVED<br>4. 系统记录解决时间<br>5. 系统将告警移动到告警历史表（可选）<br>6. 显示处理成功提示<br>7. 刷新告警列表 |
| 异常事件流 | 3a. 更新失败：系统提示"处理失败，请重试" |
| 优先级 | 中 |
| 扩展点 | 包含"告警历史查询"用例 |

---

## 4. 自动化控制模块用例表

### 表4-1 创建自动化规则用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 创建自动化规则 |
| 用例编号 | UC-013 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统 |
| 后置条件 | 自动化规则已保存到数据库 |
| 基本事件流 | 1. 管理员进入自动化控制页面<br>2. 点击"创建规则"按钮<br>3. 填写规则信息（名称、触发条件描述、执行动作描述）<br>4. 系统验证规则信息（名称非空、条件描述非空、动作描述非空）<br>5. 系统生成规则ID<br>6. 系统保存规则到数据库（automation_rules表）<br>7. 规则默认状态为启用（enabled=true）<br>8. 显示创建成功提示 |
| 异常事件流 | 4a. 规则信息验证失败：系统提示错误信息，返回步骤3<br>6a. 保存失败：系统提示"保存失败，请重试" |
| 优先级 | 中 |
| 扩展点 | 无 |

### 表4-2 启用/禁用自动化规则用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 启用/禁用自动化规则 |
| 用例编号 | UC-014 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统，自动化规则已存在 |
| 后置条件 | 规则启用状态已更新 |
| 基本事件流 | 1. 管理员在规则列表中点击"启用/禁用"开关<br>2. 系统切换规则的enabled状态<br>3. 系统更新数据库中的规则状态<br>4. 显示状态更新成功提示 |
| 异常事件流 | 3a. 更新失败：系统提示"更新失败，请重试"，恢复原状态 |
| 优先级 | 中 |
| 扩展点 | 无 |

### 表4-3 自动化控制执行用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 自动化控制执行 |
| 用例编号 | UC-015 |
| 参与者 | 系统 |
| 前置条件 | 自动化规则已配置且启用，设备数据已采集 |
| 后置条件 | 控制指令已执行，设备状态已更新 |
| 基本事件流 | 1. 系统监控环境数据<br>2. 系统查询所有启用的自动化规则<br>3. 系统检查数据是否满足规则触发条件<br>4. 如果满足条件，系统生成控制指令<br>5. 系统调用ControlService.sendCommand方法<br>6. 系统保存控制指令到数据库（control_commands表）<br>7. 系统执行控制指令（调用设备控制接口）<br>8. 系统更新指令执行状态为EXECUTED<br>9. 系统记录执行时间 |
| 异常事件流 | 3a. 数据不满足条件：系统继续监控，不执行控制<br>7a. 控制执行失败：系统更新指令状态为FAILED，记录错误日志<br>8a. 更新失败：系统记录错误日志 |
| 优先级 | 中 |
| 扩展点 | 包含"查询控制指令历史"用例 |

---

## 5. 系统维护模块用例表

### 表5-1 查询系统状态用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 查询系统状态 |
| 用例编号 | UC-016 |
| 参与者 | 系统维护员 |
| 前置条件 | 维护员已登录系统 |
| 后置条件 | 显示系统运行状态信息 |
| 基本事件流 | 1. 维护员进入系统管理页面<br>2. 系统查询数据库连接状态<br>3. 系统查询系统运行指标<br>4. 系统显示系统状态信息（数据库状态、系统健康度等） |
| 异常事件流 | 2a. 数据库连接失败：系统显示警告信息 |
| 优先级 | 低 |
| 扩展点 | 无 |

### 表5-2 教室管理用例表

| 项目 | 内容 |
|:---:|:---|
| 用例名称 | 教室管理 |
| 用例编号 | UC-017 |
| 参与者 | 学校管理员 |
| 前置条件 | 管理员已登录系统 |
| 后置条件 | 教室信息已保存或更新 |
| 基本事件流 | 1. 管理员进入系统管理页面<br>2. 选择"教室管理"功能<br>3. 执行教室操作（创建/编辑/删除/查询）<br>4. 系统验证教室信息<br>5. 系统保存或更新教室信息到数据库（classrooms表）<br>6. 显示操作成功提示 |
| 异常事件流 | 4a. 信息验证失败：系统提示错误信息<br>5a. 保存失败：系统提示"操作失败，请重试" |
| 优先级 | 低 |
| 扩展点 | 包含"查询教室列表"用例、"创建教室"用例、"编辑教室"用例、"删除教室"用例 |

---

## 用例优先级说明

- **高优先级**：核心功能，系统必须实现的基础功能
- **中优先级**：重要功能，提升系统价值和用户体验
- **低优先级**：辅助功能，系统维护和管理功能

## 用例关系说明

- **包含（include）**：用例A包含用例B，表示用例B是用例A的必需组成部分
- **扩展（extend）**：用例A扩展用例B，表示用例A是用例B的可选扩展
- **泛化（generalization）**：用例A是用例B的特殊情况




